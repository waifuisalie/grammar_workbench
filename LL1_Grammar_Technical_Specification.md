# LL(1) Grammar Technical Specification - Enhanced

**Enhancement Applied**: Revolutionary continuation pattern from Exceptional_LL1_Grammar_Analysis.md
**Date**: 2025-10-02
**Key Improvement**: AFTER_EXPR now supports nested expression assignments like `( ( A B + ) C )`

**Change Summary**: Modified `AFTER_EXPR → VARIAVEL OPERATOR` to `AFTER_EXPR → VARIAVEL AFTER_VAR_OP`, enabling variable assignment or operator usage through delegation to AFTER_VAR_OP's ε-production capability.

## Production Rules

```
PROGRAM → LINHA PROGRAM_PRIME
PROGRAM_PRIME → LINHA PROGRAM_PRIME | ε
LINHA → ABRE_PARENTESES CONTENT FECHA_PARENTESES
CONTENT → NUMERO_REAL AFTER_NUM | VARIAVEL AFTER_VAR | ABRE_PARENTESES EXPR FECHA_PARENTESES AFTER_EXPR | FOR FOR_STRUCT | WHILE WHILE_STRUCT | IFELSE IFELSE_STRUCT
AFTER_NUM → NUMERO_REAL OPERATOR | VARIAVEL AFTER_VAR_OP | ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR | RES
AFTER_VAR_OP → OPERATOR | ε
AFTER_VAR → NUMERO_REAL OPERATOR | VARIAVEL OPERATOR | ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR | ε
AFTER_EXPR → NUMERO_REAL OPERATOR | VARIAVEL AFTER_VAR_OP | ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR
EXPR → NUMERO_REAL AFTER_NUM | VARIAVEL AFTER_VAR | ABRE_PARENTESES EXPR FECHA_PARENTESES AFTER_EXPR
OPERATOR → ARITH_OP | COMP_OP | LOGIC_OP
ARITH_OP → SOMA | SUBTRACAO | MULTIPLICACAO | DIVISAO | RESTO | POTENCIA
COMP_OP → MENOR | MAIOR | IGUAL | MENOR_IGUAL | MAIOR_IGUAL | DIFERENTE
LOGIC_OP → AND | OR | NOT
FOR_STRUCT → NUMERO_REAL NUMERO_REAL VARIAVEL LINHA
WHILE_STRUCT → ABRE_PARENTESES EXPR FECHA_PARENTESES LINHA
IFELSE_STRUCT → ABRE_PARENTESES EXPR FECHA_PARENTESES LINHA LINHA
```

## EBNF Production Rules

```ebnf
PROGRAM → LINHA PROGRAM_PRIME
PROGRAM_PRIME → LINHA PROGRAM_PRIME | ε
LINHA → ABRE_PARENTESES CONTENT FECHA_PARENTESES
CONTENT → NUMERO_REAL AFTER_NUM
        | VARIAVEL AFTER_VAR
        | ABRE_PARENTESES EXPR FECHA_PARENTESES AFTER_EXPR
        | FOR FOR_STRUCT
        | WHILE WHILE_STRUCT
        | IFELSE IFELSE_STRUCT
AFTER_NUM → NUMERO_REAL OPERATOR
         | VARIAVEL AFTER_VAR_OP
         | ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR
         | RES
AFTER_VAR_OP → OPERATOR | ε
AFTER_VAR → NUMERO_REAL OPERATOR
         | VARIAVEL OPERATOR
         | ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR
         | ε
AFTER_EXPR → NUMERO_REAL OPERATOR
          | VARIAVEL AFTER_VAR_OP
          | ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR
EXPR → NUMERO_REAL AFTER_NUM
     | VARIAVEL AFTER_VAR
     | ABRE_PARENTESES EXPR FECHA_PARENTESES AFTER_EXPR
OPERATOR → ARITH_OP | COMP_OP | LOGIC_OP
ARITH_OP → SOMA | SUBTRACAO | MULTIPLICACAO | DIVISAO | RESTO | POTENCIA
COMP_OP → MENOR | MAIOR | IGUAL | MENOR_IGUAL | MAIOR_IGUAL | DIFERENTE
LOGIC_OP → AND | OR | NOT
FOR_STRUCT → NUMERO_REAL NUMERO_REAL VARIAVEL LINHA
WHILE_STRUCT → ABRE_PARENTESES EXPR FECHA_PARENTESES LINHA
IFELSE_STRUCT → ABRE_PARENTESES EXPR FECHA_PARENTESES LINHA LINHA
```

## Terminal Symbols

```
NUMERO_REAL
VARIAVEL
ABRE_PARENTESES
FECHA_PARENTESES
RES
FOR
WHILE
IFELSE
SOMA
SUBTRACAO
MULTIPLICACAO
DIVISAO
RESTO
POTENCIA
MENOR
MAIOR
MENOR_IGUAL
MAIOR_IGUAL
IGUAL
DIFERENTE
AND
OR
NOT
FIM
```

## Non-Terminal Symbols

```
PROGRAM
PROGRAM_PRIME
LINHA
CONTENT
AFTER_NUM
AFTER_VAR_OP
AFTER_VAR
AFTER_EXPR
EXPR
OPERATOR
ARITH_OP
COMP_OP
LOGIC_OP
FOR_STRUCT
WHILE_STRUCT
IFELSE_STRUCT
```

## FIRST Sets

```
FIRST(PROGRAM) = {ABRE_PARENTESES}
FIRST(PROGRAM_PRIME) = {ABRE_PARENTESES, ε}
FIRST(LINHA) = {ABRE_PARENTESES}
FIRST(CONTENT) = {NUMERO_REAL, VARIAVEL, ABRE_PARENTESES, FOR, WHILE, IFELSE}
FIRST(AFTER_NUM) = {NUMERO_REAL, VARIAVEL, ABRE_PARENTESES, RES}
FIRST(AFTER_VAR_OP) = {SOMA, SUBTRACAO, MULTIPLICACAO, DIVISAO, RESTO, POTENCIA, MENOR, MAIOR, IGUAL, MENOR_IGUAL, MAIOR_IGUAL, DIFERENTE, AND, OR, NOT, ε}
FIRST(AFTER_VAR) = {NUMERO_REAL, VARIAVEL, ABRE_PARENTESES, ε}
FIRST(AFTER_EXPR) = {NUMERO_REAL, VARIAVEL, ABRE_PARENTESES}
FIRST(EXPR) = {NUMERO_REAL, VARIAVEL, ABRE_PARENTESES}
FIRST(OPERATOR) = {SOMA, SUBTRACAO, MULTIPLICACAO, DIVISAO, RESTO, POTENCIA, MENOR, MAIOR, IGUAL, MENOR_IGUAL, MAIOR_IGUAL, DIFERENTE, AND, OR, NOT}
FIRST(ARITH_OP) = {SOMA, SUBTRACAO, MULTIPLICACAO, DIVISAO, RESTO, POTENCIA}
FIRST(COMP_OP) = {MENOR, MAIOR, IGUAL, MENOR_IGUAL, MAIOR_IGUAL, DIFERENTE}
FIRST(LOGIC_OP) = {AND, OR, NOT}
FIRST(FOR_STRUCT) = {NUMERO_REAL}
FIRST(WHILE_STRUCT) = {ABRE_PARENTESES}
FIRST(IFELSE_STRUCT) = {ABRE_PARENTESES}
```

## FOLLOW Sets

```
FOLLOW(PROGRAM) = {FIM}
FOLLOW(PROGRAM_PRIME) = {FIM}
FOLLOW(LINHA) = {ABRE_PARENTESES, FIM}
FOLLOW(CONTENT) = {FECHA_PARENTESES}
FOLLOW(AFTER_NUM) = {FECHA_PARENTESES}
FOLLOW(AFTER_VAR_OP) = {FECHA_PARENTESES}
FOLLOW(AFTER_VAR) = {FECHA_PARENTESES}
FOLLOW(AFTER_EXPR) = {FECHA_PARENTESES}
FOLLOW(EXPR) = {FECHA_PARENTESES}
FOLLOW(OPERATOR) = {FECHA_PARENTESES}
FOLLOW(ARITH_OP) = {FECHA_PARENTESES}
FOLLOW(COMP_OP) = {FECHA_PARENTESES}
FOLLOW(LOGIC_OP) = {FECHA_PARENTESES}
FOLLOW(FOR_STRUCT) = {FECHA_PARENTESES}
FOLLOW(WHILE_STRUCT) = {FECHA_PARENTESES}
FOLLOW(IFELSE_STRUCT) = {FECHA_PARENTESES}
```

## LL(1) Parsing Table

| Non-Terminal | ( | ) | NUM | VAR | FOR | WHILE | IFELSE | RES | + | - | * | / | % | ^ | > | < | >= | <= | == | != | AND | OR | NOT | $ |
|--------------|---|---|-----|-----|-----|-------|--------|-----|---|---|---|---|---|---|---|---|----|----|----|----|-----|----|----|---|
| PROGRAM | 1 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| PROGRAM_PRIME | 2 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | 3 |
| LINHA | 4 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| CONTENT | 7 | - | 5 | 6 | 8 | 9 | 10 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| AFTER_NUM | 13 | - | 11 | 12 | - | - | - | 14 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| AFTER_VAR_OP | - | 16 | - | - | - | - | - | - | 15 | 15 | 15 | 15 | 15 | 15 | 15 | 15 | 15 | 15 | 15 | 15 | 15 | 15 | 15 | - |
| AFTER_VAR | 19 | 20 | 17 | 18 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| AFTER_EXPR | 23 | - | 21 | 22 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| EXPR | 26 | - | 24 | 25 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| OPERATOR | - | - | - | - | - | - | - | - | 27 | 27 | 27 | 27 | 27 | 27 | 28 | 28 | 28 | 28 | 28 | 28 | 29 | 29 | 29 | - |
| ARITH_OP | - | - | - | - | - | - | - | - | 30 | 31 | 32 | 33 | 34 | 35 | - | - | - | - | - | - | - | - | - | - |
| COMP_OP | - | - | - | - | - | - | - | - | - | - | - | - | - | - | 36 | 37 | 38 | 39 | 40 | 41 | - | - | - | - |
| LOGIC_OP | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | 42 | 43 | 44 | - |
| FOR_STRUCT | - | - | 45 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| WHILE_STRUCT | 46 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| IFELSE_STRUCT | 47 | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |

### Production Rules Reference

```
1. PROGRAM → LINHA PROGRAM_PRIME
2. PROGRAM_PRIME → LINHA PROGRAM_PRIME
3. PROGRAM_PRIME → ε
4. LINHA → ABRE_PARENTESES CONTENT FECHA_PARENTESES
5. CONTENT → NUMERO_REAL AFTER_NUM
6. CONTENT → VARIAVEL AFTER_VAR
7. CONTENT → ABRE_PARENTESES EXPR FECHA_PARENTESES AFTER_EXPR
8. CONTENT → FOR FOR_STRUCT
9. CONTENT → WHILE WHILE_STRUCT
10. CONTENT → IFELSE IFELSE_STRUCT
11. AFTER_NUM → NUMERO_REAL OPERATOR
12. AFTER_NUM → VARIAVEL AFTER_VAR_OP
13. AFTER_NUM → ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR
14. AFTER_NUM → RES
15. AFTER_VAR_OP → OPERATOR
16. AFTER_VAR_OP → ε
17. AFTER_VAR → NUMERO_REAL OPERATOR
18. AFTER_VAR → VARIAVEL OPERATOR
19. AFTER_VAR → ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR
20. AFTER_VAR → ε
21. AFTER_EXPR → NUMERO_REAL OPERATOR
22. AFTER_EXPR → VARIAVEL AFTER_VAR_OP
23. AFTER_EXPR → ABRE_PARENTESES EXPR FECHA_PARENTESES OPERATOR
24. EXPR → NUMERO_REAL AFTER_NUM
25. EXPR → VARIAVEL AFTER_VAR
26. EXPR → ABRE_PARENTESES EXPR FECHA_PARENTESES AFTER_EXPR
27. OPERATOR → ARITH_OP
28. OPERATOR → COMP_OP
29. OPERATOR → LOGIC_OP
30. ARITH_OP → SOMA
31. ARITH_OP → SUBTRACAO
32. ARITH_OP → MULTIPLICACAO
33. ARITH_OP → DIVISAO
34. ARITH_OP → RESTO
35. ARITH_OP → POTENCIA
36. COMP_OP → MENOR
37. COMP_OP → MAIOR
38. COMP_OP → IGUAL
39. COMP_OP → MENOR_IGUAL
40. COMP_OP → MAIOR_IGUAL
41. COMP_OP → DIFERENTE
42. LOGIC_OP → AND
43. LOGIC_OP → OR
44. LOGIC_OP → NOT
45. FOR_STRUCT → NUMERO_REAL NUMERO_REAL VARIAVEL LINHA
46. WHILE_STRUCT → ABRE_PARENTESES EXPR FECHA_PARENTESES LINHA
47. IFELSE_STRUCT → ABRE_PARENTESES EXPR FECHA_PARENTESES LINHA LINHA
```